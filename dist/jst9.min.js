!function(r,e){"function"==typeof define&&define.amd?define(["axios"],function(n){return r.jsT9=e(n)}):"object"==typeof exports?module.exports=e(require("axios")):r.jsT9=e(r.axios)}(this,function(r){"use strict";var e=function(r,e){this.config={sort:function(r,e){return r.length<e.length?-1:r.length>e.length?1:e>=r?-1:1},maxAmount:1/0,caseSentitive:!0,dataSource:""},function(r,e){for(var n in e)r[n]=e[n];return r}(this.config,e),this.root={branches:[]},this._getWordList(r,function(r){var e;for(var n in r)e=r[n],this.addWord(e)}.bind(this))};return e.prototype={constructor:e,predict:function(r,e){if("undefined"==typeof r)return[];e=e||this.config.maxAmount;for(var n=this.root,t=!1,s="";!t;){for(var i=!1,a=0;a<r.length&&!i;a++){var o=r.substring(0,r.length-a);for(var h in n.branches)if(0===n.branches[h].prefix.indexOf(o)){s+=n.branches[h].prefix,r=n.branches[h].prefix===o?r.substring(r.length-a):"",n=n.branches[h],i=!0;break}}if(!i)return[];0===r.length&&(t=!0)}var c;n.$===!0&&(c=s);var f=this._exploreBranch(s,n);return c&&f.push(c),f.sort(this.config.sort),f.slice(0,e)},addWord:function(r){for(var e,n=this.root,t=!1;!t;){var s=!1,i=!1,a=!1;for(var o in n.branches){if(this.tryCase1(n,r,o))return;if(i=this.tryCase2(n,r,o)){r=i.word,n=i.branch,s=!0;break}for(var h=0;h<=r.length-1;h++){var c=r.substring(0,r.length-h),f=r.substring(r.length-h);if(0===n.branches[o].prefix.indexOf(c)){e={prefix:c,branches:[],$:0===f.length};var u={prefix:n.branches[o].prefix.substring(c.length),branches:n.branches[o].branches,$:n.branches[o].$};if(n.branches[o]=e,n.branches[o].branches.push(u),f.length>0){var b={prefix:f,branches:[],$:!0};n.branches[o].branches.push(b)}t=s=!0,a=!0;break}}if(a)break}s||(e={prefix:r,branches:[],$:!0},n.branches.push(e),t=!0)}},tryCase1:function(r,e,n){return r.branches[n].prefix===e?(r.branches[n].$=!0,!0):!1},tryCase2:function(r,e,n){return 0===e.indexOf(r.branches[n].prefix)?(e=e.substring(r.branches[n].prefix.length),r=r.branches[n],{branch:r,word:e}):!1},_exploreBranch:function(r,e){var n=[];for(var t in e.branches){var s=e.branches[t].prefix;e.branches[t].$===!0&&n.push(r+s);var i=this._exploreBranch(r+s,e.branches[t]);n=n.concat(i)}return n},_getWordList:function(r,e){Array.isArray(r)?e(r):"string"==typeof r?this._fetchWordList(r,e):(console.error(typeof r+" variable is not supported as data source"),e([]))},_fetchWordList:function(e,n){var t=[];r.get(e).then(function(r){var e=r.data;"text"===r.responseType&&(e=JSON.parse(e)),Array.isArray(e.words)&&(t=e.words),n(t)})["catch"](function(r){console.error(r),n(t)})}},e});