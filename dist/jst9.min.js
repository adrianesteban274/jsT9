!function(r,n){"function"==typeof define&&define.amd?define(["axios"],function(e){return r.jsT9=n(e)}):"object"==typeof exports?module.exports=n(require("axios")):r.jsT9=n(r.axios)}(this,function(r){"use strict";var n=function(r,n){this.config={sort:function(r,n){return r.length<n.length?-1:r.length>n.length?1:n>=r?-1:1},maxAmount:1/0,caseSentitive:!0,dataSource:""},function(r,n){for(var e in n)r[e]=n[e];return r}(this.config,n),this.root={branches:[]},this._getWordList(r,function(r){var n;for(var e in r)n=r[e],this.addWord(n)}.bind(this))};return n.prototype={constructor:n,predict:function(r,n){if(!r)return[];n=n||this.config.maxAmount;var e=!1,t=this._findInitialBranch(r);if(!t)return[];t.currentBranch.$===!0&&(e=t.baseWord);var s=this._exploreBranch(t.baseWord,t.currentBranch);return e&&s.push(e),s.sort(this.config.sort),s.slice(0,n)},_findInitialBranch:function(r){for(var n,e=this.root,t=!1,s="";!t;){n=!1;for(var i=0;i<r.length&&!n;i++){var a=r.substring(0,r.length-i);for(var o in e.branches)if(0===e.branches[o].prefix.indexOf(a)){s+=e.branches[o].prefix,r=e.branches[o].prefix===a?r.substring(r.length-i):"",e=e.branches[o],n=!0;break}}if(!n)return!1;0===r.length&&(t=!0)}return{currentBranch:e,baseWord:s}},addWord:function(r){for(var n=this.root,e=!1;!e;){var t,s=!1,i=!1;for(var a in n.branches){if(this._tryCase1(n,r,a))return;if(t=this._tryCase2(n,r,a)){r=t.word,n=t.branch,s=!0;break}if(this._tryCase3(n,r,a)){i=e=s=!0;break}}this._tryCase4(n,r,s)&&(e=!0)}},_tryCase1:function(r,n,e){return r.branches[e].prefix===n?(r.branches[e].$=!0,!0):!1},_tryCase2:function(r,n,e){return 0===n.indexOf(r.branches[e].prefix)?(n=n.substring(r.branches[e].prefix.length),r=r.branches[e],{branch:r,word:n}):!1},_tryCase3:function(r,n,e){for(var t,s=0;s<=n.length-1;s++){var i=n.substring(0,n.length-s),a=n.substring(n.length-s);if(0===r.branches[e].prefix.indexOf(i)){t={prefix:i,branches:[],$:0===a.length};var o={prefix:r.branches[e].prefix.substring(i.length),branches:r.branches[e].branches,$:r.branches[e].$};if(r.branches[e]=t,r.branches[e].branches.push(o),a.length>0){var c={prefix:a,branches:[],$:!0};r.branches[e].branches.push(c)}return!0}}},_tryCase4:function(r,n,e){var t;return e?!1:(t={prefix:n,branches:[],$:!0},r.branches.push(t),!0)},_exploreBranch:function(r,n){var e=[];for(var t in n.branches){var s=n.branches[t].prefix;n.branches[t].$===!0&&e.push(r+s);var i=this._exploreBranch(r+s,n.branches[t]);e=e.concat(i)}return e},_getWordList:function(r,n){Array.isArray(r)?n(r):"string"==typeof r?this._fetchWordList(r,n):(console.error(typeof r+" variable is not supported as data source"),n([]))},_fetchWordList:function(n,e){var t=[];r.get(n).then(function(r){var n=r.data;"text"===r.responseType&&(n=JSON.parse(n)),Array.isArray(n.words)&&(t=n.words),e(t)})["catch"](function(r){console.error(r),e(t)})}},n});